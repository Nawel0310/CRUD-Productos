<!DOCTYPE html>
<html data-bs-theme="light" lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Control_de_Productos</title>
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Akatab&amp;display=swap">
    <link rel="stylesheet" href="/assets/css/styles.css">
</head>

<body>

    <div class="container-fluid" th:if="${msgExito!=null}">
        <div class="alert alert-success d-flex flex-row justify-content-center" role="alert" style="margin-top: 10px">
            <span class="d-flex flex-row-reverse">
                <button class="btn btn-sm btn-close" type="button" data-bs-dismiss="alert">
            </button>[[${msgExito}]]</span>
        </div>
    </div>


    <section id="seccion-productos">
        <nav class="navbar navbar-expand-md bg-body" style="height: 10vh;">
            <div class="container-fluid"><a class="navbar-brand" href="#">ProductFinder<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 24 24" width="1em" fill="currentColor">
                        <path d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"></path>
                    </svg></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navcol-1">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="btn btn-success" role="button" style="font-family: Akatab, sans-serif;" href="/nuevo">Agregar Producto</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container" style="width: 100%;height: 90vh;">
            <div>
                <h1 class="titulo" style="text-align: center;">Listado de Productos</h1>
            </div>
            <div>
                <form class="busqueda-form" th:actions="@{/}">
                    <input class="form-control" type="search" name="palabraClave" id="palabraClave" th:value="${palabraClave}" placeholder="Ingrese el ID, nombre, marca, país o precio del producto">
                    <button class="btn btn-primary" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 24 24" width="1em" fill="currentColor" class="fs-4">
                            <path d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                        </svg>
                    </button>
                </form>
            </div>
            <div>
                <div class="table-responsive tabla-productos">
                    <table class="table table-hover table-bordered">
                        <thead>
                            <tr class="fila-tabla">
                                <th class="tabla-cell">ID</th>
                                <th class="tabla-cell">Nombre</th>
                                <th class="tabla-cell">Marca</th>
                                <th class="tabla-cell">País de Origen</th>
                                <th class="tabla-cell">Precio</th>
                                <th class="tabla-cell">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="producto : ${listaProductos}" >
                                <td th:text="${producto.id}" class="tabla-col">UNDEFINED</td>
                                <td th:text="${producto.nombre}">UNDEFINED</td>
                                <td th:text="${producto.marca}">UNDEFINED</td>
                                <td th:text="${producto.hechoEn}">UNDEFINED</td>
                                <td th:text="${producto.precio}">UNDEFINED</td>
                                <td id="cell-botones">
                                    <div class="d-flex justify-content-between" id="div-acciones">
                                        <a th:href="@{/editar/{id}(id=${producto.id})}" class="btn btn-warning" id="boton-editar" type="button">Editar<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="1em" viewBox="0 0 24 24" width="1em" fill="currentColor">
                                                <rect fill="none" height="24" width="24"></rect>
                                                <path d="M3,10h11v2H3V10z M3,8h11V6H3V8z M3,16h7v-2H3V16z M18.01,12.87l0.71-0.71c0.39-0.39,1.02-0.39,1.41,0l0.71,0.71 c0.39,0.39,0.39,1.02,0,1.41l-0.71,0.71L18.01,12.87z M17.3,13.58l-5.3,5.3V21h2.12l5.3-5.3L17.3,13.58z"></path>
                                            </svg>
                                        </a >
                                        <a onclick="eliminarProducto(this)" class="btn btn-danger" id="boton-eliminar" type="button">Eliminar<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 24 24" width="1em" fill="currentColor">
                                                <path d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M0 0h24v24H0V0z" fill="none"></path>
                                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path>
                                            </svg>
                                        </a>
                                        <form th:action="@{/borrar/{id}(id=${producto.id})}" method="post">
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
    <script> function eliminarProducto(elemento){
            var ok = confirm('¿Seguro que desea eliminar el producto?');
            if (ok){
                elemento.nextElementSibling.submit()
            }
    }
</script>


</body>

</html>